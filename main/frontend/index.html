<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Sentiment Predictor — Frontend</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 760px; margin: 40px auto; }
    textarea { width:100%; height:120px; }
    button { padding:10px 16px; }
    .result { margin-top:16px; padding:12px; border:1px solid #ddd; border-radius:6px; }
  </style>
</head>
<body>
  <h1>Sentiment Predictor</h1>
  <p>Type text below and click <strong>Analyze</strong> to get a prediction from the local API.</p>

  <textarea id="txt" placeholder="Type your sentence here...">I really like this product</textarea>
  <div style="margin-top:10px;">
    <button id="btn">Analyze</button>
  </div>

  <div id="out" class="result" style="display:none;"></div>

  <script>
    const btn = document.getElementById("btn");
    const out = document.getElementById("out");
    btn.onclick = async () => {
      const text = document.getElementById("txt").value;
      out.style.display = "block";
      out.innerText = "Requesting...";
      try {
        const resp = await fetch("http://127.0.0.1:8000/predict", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ text })
        });
        if (!resp.ok) {
          out.innerText = `Error: ${resp.status} ${await resp.text()}`;
          return;
        }
        const data = await resp.json();
        out.innerHTML = `<b>Prediction:</b> ${data.prediction} <br/>
                         <b>Probabilities:</b> ${JSON.stringify(data.probabilities)}`;
      } catch (e) {
        out.innerText = "Request failed — is the API running? " + e;
      }
    };
  </script>
</body>
</html>
